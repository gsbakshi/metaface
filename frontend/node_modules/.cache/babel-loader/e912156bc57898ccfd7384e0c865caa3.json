{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Particles = void 0;\n\nvar Particle_1 = require(\"./Particle\");\n\nvar InteractionManager_1 = require(\"./Particle/Interactions/Particles/InteractionManager\");\n\nvar Grabber_1 = require(\"./Particle/Interactions/Mouse/Grabber\");\n\nvar Enums_1 = require(\"../Enums\");\n\nvar Repulser_1 = require(\"./Particle/Interactions/Mouse/Repulser\");\n\nvar Bubbler_1 = require(\"./Particle/Interactions/Mouse/Bubbler\");\n\nvar Connector_1 = require(\"./Particle/Interactions/Mouse/Connector\");\n\nvar Utils_1 = require(\"../Utils\");\n\nvar Particles = function () {\n  function Particles(container) {\n    this.container = container;\n    this.array = [];\n    this.interactionsEnabled = false;\n    var canvasSize = this.container.canvas.size;\n    this.noiseZ = 0;\n    this.linksColors = {};\n    this.quadTree = new Utils_1.QuadTree(new Utils_1.Rectangle(0, 0, canvasSize.width, canvasSize.height), 4);\n  }\n\n  Object.defineProperty(Particles.prototype, \"count\", {\n    get: function () {\n      return this.array.length;\n    },\n    enumerable: false,\n    configurable: true\n  });\n\n  Particles.prototype.init = function () {\n    var container = this.container;\n    var options = container.options;\n    var handled = false;\n    this.noiseZ = 0;\n\n    for (var id in container.plugins) {\n      var plugin = container.plugins[id];\n\n      if (plugin.particlesInitialization !== undefined) {\n        handled = plugin.particlesInitialization();\n      }\n\n      if (handled) {\n        break;\n      }\n    }\n\n    if (!handled) {\n      for (var i = this.count; i < options.particles.number.value; i++) {\n        this.addParticle();\n      }\n    }\n\n    this.interactionsEnabled = options.particles.links.enable || options.particles.move.attract.enable || options.particles.collisions.enable || options.infection.enable;\n\n    if (options.infection.enable) {\n      for (var i = 0; i < options.infection.infections; i++) {\n        var notInfected = this.array.filter(function (p) {\n          return p.infectionStage === undefined;\n        });\n        var infected = Utils_1.Utils.itemFromArray(notInfected);\n        infected.startInfection(0);\n      }\n    }\n  };\n\n  Particles.prototype.redraw = function () {\n    this.clear();\n    this.init();\n    this.draw(0);\n  };\n\n  Particles.prototype.removeAt = function (index, quantity) {\n    if (index >= 0 && index <= this.count) {\n      for (var _i = 0, _a = this.array.splice(index, quantity !== null && quantity !== void 0 ? quantity : 1); _i < _a.length; _i++) {\n        var particle = _a[_i];\n        particle.destroy();\n      }\n    }\n  };\n\n  Particles.prototype.remove = function (particle) {\n    this.removeAt(this.array.indexOf(particle));\n  };\n\n  Particles.prototype.update = function (delta) {\n    var container = this.container;\n    var options = container.options;\n    var particlesToDelete = [];\n\n    for (var i = 0; i < this.count; i++) {\n      var particle = this.array[i];\n      particle.bubble.inRange = false;\n\n      for (var id in container.plugins) {\n        var plugin = container.plugins[id];\n\n        if (particle.destroyed) {\n          break;\n        }\n\n        if (plugin.particleUpdate) {\n          plugin.particleUpdate(particle, delta);\n        }\n      }\n\n      if (!particle.destroyed) {\n        var sizeOpt = particle.particlesOptions.size;\n        var sizeAnim = sizeOpt.animation;\n\n        if (sizeAnim.enable) {\n          switch (sizeAnim.destroy) {\n            case Enums_1.DestroyType.max:\n              if (particle.size.value >= sizeOpt.value * container.retina.pixelRatio) {\n                particle.destroyed = true;\n              }\n\n              break;\n\n            case Enums_1.DestroyType.min:\n              if (particle.size.value <= sizeAnim.minimumValue * container.retina.pixelRatio) {\n                particle.destroyed = true;\n              }\n\n              break;\n          }\n        }\n      }\n\n      if (particle.destroyed) {\n        particlesToDelete.push(particle);\n        continue;\n      }\n\n      particle.update(i, delta);\n      var pos = particle.getPosition();\n      this.quadTree.insert(new Utils_1.Point(pos, particle));\n    }\n\n    for (var _i = 0, particlesToDelete_1 = particlesToDelete; _i < particlesToDelete_1.length; _i++) {\n      var particle = particlesToDelete_1[_i];\n      this.remove(particle);\n    }\n\n    if (container.options.interactivity.events.onDiv.enable || container.options.interactivity.events.onHover.enable && container.interactivity.mouse.position || container.options.interactivity.events.onClick.enable && container.interactivity.mouse.clickPosition) {\n      var hoverMode = options.interactivity.events.onHover.mode;\n      var clickMode = options.interactivity.events.onClick.mode;\n      var divMode = options.interactivity.events.onDiv.mode;\n\n      if (Utils_1.Utils.isInArray(Enums_1.HoverMode.grab, hoverMode)) {\n        Grabber_1.Grabber.grab(container, delta);\n      }\n\n      if (Utils_1.Utils.isInArray(Enums_1.HoverMode.repulse, hoverMode) || Utils_1.Utils.isInArray(Enums_1.ClickMode.repulse, clickMode) || Utils_1.Utils.isInArray(Enums_1.DivMode.repulse, divMode)) {\n        Repulser_1.Repulser.repulse(container, delta);\n      }\n\n      if (Utils_1.Utils.isInArray(Enums_1.HoverMode.bubble, hoverMode) || Utils_1.Utils.isInArray(Enums_1.ClickMode.bubble, clickMode)) {\n        Bubbler_1.Bubbler.bubble(container, delta);\n      }\n\n      if (Utils_1.Utils.isInArray(Enums_1.HoverMode.connect, hoverMode)) {\n        Connector_1.Connector.connect(container, delta);\n      }\n    }\n\n    for (var _a = 0, _b = this.array; _a < _b.length; _a++) {\n      var particle = _b[_a];\n      Bubbler_1.Bubbler.reset(particle);\n\n      if (this.interactionsEnabled) {\n        InteractionManager_1.InteractionManager.interact(particle, container, delta);\n      }\n    }\n  };\n\n  Particles.prototype.draw = function (delta) {\n    var container = this.container;\n    container.canvas.clear();\n    var canvasSize = this.container.canvas.size;\n    this.quadTree = new Utils_1.QuadTree(new Utils_1.Rectangle(0, 0, canvasSize.width, canvasSize.height), 4);\n    this.update(delta);\n    this.noiseZ += 0.0004;\n\n    for (var id in container.plugins) {\n      var plugin = container.plugins[id];\n      container.canvas.drawPlugin(plugin, delta);\n    }\n\n    for (var _i = 0, _a = this.array; _i < _a.length; _i++) {\n      var p = _a[_i];\n      p.draw(delta);\n    }\n  };\n\n  Particles.prototype.clear = function () {\n    this.array = [];\n  };\n\n  Particles.prototype.push = function (nb, mousePosition) {\n    var _a;\n\n    var container = this.container;\n    var options = container.options;\n    var limit = options.particles.number.limit * container.density;\n    this.pushing = true;\n\n    if (limit > 0) {\n      var countToRemove = this.count + nb - limit;\n\n      if (countToRemove > 0) {\n        this.removeQuantity(countToRemove);\n      }\n    }\n\n    var pos;\n\n    if (mousePosition) {\n      pos = (_a = mousePosition.position) !== null && _a !== void 0 ? _a : {\n        x: 0,\n        y: 0\n      };\n    }\n\n    for (var i = 0; i < nb; i++) {\n      this.addParticle(pos);\n    }\n\n    if (!options.particles.move.enable) {\n      this.container.play();\n    }\n\n    this.pushing = false;\n  };\n\n  Particles.prototype.addParticle = function (position, overrideOptions) {\n    var particle = new Particle_1.Particle(this.container, position, overrideOptions);\n    this.array.push(particle);\n    return particle;\n  };\n\n  Particles.prototype.removeQuantity = function (quantity) {\n    var container = this.container;\n    var options = container.options;\n    this.removeAt(0, quantity);\n\n    if (!options.particles.move.enable) {\n      this.container.play();\n    }\n  };\n\n  return Particles;\n}();\n\nexports.Particles = Particles;","map":{"version":3,"sources":["/Users/guru/Desktop/Development/React/smartbrain/node_modules/tsparticles/dist/Core/Particles.js"],"names":["Object","defineProperty","exports","value","Particles","Particle_1","require","InteractionManager_1","Grabber_1","Enums_1","Repulser_1","Bubbler_1","Connector_1","Utils_1","container","array","interactionsEnabled","canvasSize","canvas","size","noiseZ","linksColors","quadTree","QuadTree","Rectangle","width","height","prototype","get","length","enumerable","configurable","init","options","handled","id","plugins","plugin","particlesInitialization","undefined","i","count","particles","number","addParticle","links","enable","move","attract","collisions","infection","infections","notInfected","filter","p","infectionStage","infected","Utils","itemFromArray","startInfection","redraw","clear","draw","removeAt","index","quantity","_i","_a","splice","particle","destroy","remove","indexOf","update","delta","particlesToDelete","bubble","inRange","destroyed","particleUpdate","sizeOpt","particlesOptions","sizeAnim","animation","DestroyType","max","retina","pixelRatio","min","minimumValue","push","pos","getPosition","insert","Point","particlesToDelete_1","interactivity","events","onDiv","onHover","mouse","position","onClick","clickPosition","hoverMode","mode","clickMode","divMode","isInArray","HoverMode","grab","Grabber","repulse","ClickMode","DivMode","Repulser","Bubbler","connect","Connector","_b","reset","InteractionManager","interact","drawPlugin","nb","mousePosition","limit","density","pushing","countToRemove","removeQuantity","x","y","play","overrideOptions","Particle"],"mappings":"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","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Particles = void 0;\nvar Particle_1 = require(\"./Particle\");\nvar InteractionManager_1 = require(\"./Particle/Interactions/Particles/InteractionManager\");\nvar Grabber_1 = require(\"./Particle/Interactions/Mouse/Grabber\");\nvar Enums_1 = require(\"../Enums\");\nvar Repulser_1 = require(\"./Particle/Interactions/Mouse/Repulser\");\nvar Bubbler_1 = require(\"./Particle/Interactions/Mouse/Bubbler\");\nvar Connector_1 = require(\"./Particle/Interactions/Mouse/Connector\");\nvar Utils_1 = require(\"../Utils\");\nvar Particles = (function () {\n    function Particles(container) {\n        this.container = container;\n        this.array = [];\n        this.interactionsEnabled = false;\n        var canvasSize = this.container.canvas.size;\n        this.noiseZ = 0;\n        this.linksColors = {};\n        this.quadTree = new Utils_1.QuadTree(new Utils_1.Rectangle(0, 0, canvasSize.width, canvasSize.height), 4);\n    }\n    Object.defineProperty(Particles.prototype, \"count\", {\n        get: function () {\n            return this.array.length;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Particles.prototype.init = function () {\n        var container = this.container;\n        var options = container.options;\n        var handled = false;\n        this.noiseZ = 0;\n        for (var id in container.plugins) {\n            var plugin = container.plugins[id];\n            if (plugin.particlesInitialization !== undefined) {\n                handled = plugin.particlesInitialization();\n            }\n            if (handled) {\n                break;\n            }\n        }\n        if (!handled) {\n            for (var i = this.count; i < options.particles.number.value; i++) {\n                this.addParticle();\n            }\n        }\n        this.interactionsEnabled =\n            options.particles.links.enable ||\n                options.particles.move.attract.enable ||\n                options.particles.collisions.enable ||\n                options.infection.enable;\n        if (options.infection.enable) {\n            for (var i = 0; i < options.infection.infections; i++) {\n                var notInfected = this.array.filter(function (p) { return p.infectionStage === undefined; });\n                var infected = Utils_1.Utils.itemFromArray(notInfected);\n                infected.startInfection(0);\n            }\n        }\n    };\n    Particles.prototype.redraw = function () {\n        this.clear();\n        this.init();\n        this.draw(0);\n    };\n    Particles.prototype.removeAt = function (index, quantity) {\n        if (index >= 0 && index <= this.count) {\n            for (var _i = 0, _a = this.array.splice(index, quantity !== null && quantity !== void 0 ? quantity : 1); _i < _a.length; _i++) {\n                var particle = _a[_i];\n                particle.destroy();\n            }\n        }\n    };\n    Particles.prototype.remove = function (particle) {\n        this.removeAt(this.array.indexOf(particle));\n    };\n    Particles.prototype.update = function (delta) {\n        var container = this.container;\n        var options = container.options;\n        var particlesToDelete = [];\n        for (var i = 0; i < this.count; i++) {\n            var particle = this.array[i];\n            particle.bubble.inRange = false;\n            for (var id in container.plugins) {\n                var plugin = container.plugins[id];\n                if (particle.destroyed) {\n                    break;\n                }\n                if (plugin.particleUpdate) {\n                    plugin.particleUpdate(particle, delta);\n                }\n            }\n            if (!particle.destroyed) {\n                var sizeOpt = particle.particlesOptions.size;\n                var sizeAnim = sizeOpt.animation;\n                if (sizeAnim.enable) {\n                    switch (sizeAnim.destroy) {\n                        case Enums_1.DestroyType.max:\n                            if (particle.size.value >= sizeOpt.value * container.retina.pixelRatio) {\n                                particle.destroyed = true;\n                            }\n                            break;\n                        case Enums_1.DestroyType.min:\n                            if (particle.size.value <= sizeAnim.minimumValue * container.retina.pixelRatio) {\n                                particle.destroyed = true;\n                            }\n                            break;\n                    }\n                }\n            }\n            if (particle.destroyed) {\n                particlesToDelete.push(particle);\n                continue;\n            }\n            particle.update(i, delta);\n            var pos = particle.getPosition();\n            this.quadTree.insert(new Utils_1.Point(pos, particle));\n        }\n        for (var _i = 0, particlesToDelete_1 = particlesToDelete; _i < particlesToDelete_1.length; _i++) {\n            var particle = particlesToDelete_1[_i];\n            this.remove(particle);\n        }\n        if (container.options.interactivity.events.onDiv.enable ||\n            (container.options.interactivity.events.onHover.enable && container.interactivity.mouse.position) ||\n            (container.options.interactivity.events.onClick.enable && container.interactivity.mouse.clickPosition)) {\n            var hoverMode = options.interactivity.events.onHover.mode;\n            var clickMode = options.interactivity.events.onClick.mode;\n            var divMode = options.interactivity.events.onDiv.mode;\n            if (Utils_1.Utils.isInArray(Enums_1.HoverMode.grab, hoverMode)) {\n                Grabber_1.Grabber.grab(container, delta);\n            }\n            if (Utils_1.Utils.isInArray(Enums_1.HoverMode.repulse, hoverMode) ||\n                Utils_1.Utils.isInArray(Enums_1.ClickMode.repulse, clickMode) ||\n                Utils_1.Utils.isInArray(Enums_1.DivMode.repulse, divMode)) {\n                Repulser_1.Repulser.repulse(container, delta);\n            }\n            if (Utils_1.Utils.isInArray(Enums_1.HoverMode.bubble, hoverMode) || Utils_1.Utils.isInArray(Enums_1.ClickMode.bubble, clickMode)) {\n                Bubbler_1.Bubbler.bubble(container, delta);\n            }\n            if (Utils_1.Utils.isInArray(Enums_1.HoverMode.connect, hoverMode)) {\n                Connector_1.Connector.connect(container, delta);\n            }\n        }\n        for (var _a = 0, _b = this.array; _a < _b.length; _a++) {\n            var particle = _b[_a];\n            Bubbler_1.Bubbler.reset(particle);\n            if (this.interactionsEnabled) {\n                InteractionManager_1.InteractionManager.interact(particle, container, delta);\n            }\n        }\n    };\n    Particles.prototype.draw = function (delta) {\n        var container = this.container;\n        container.canvas.clear();\n        var canvasSize = this.container.canvas.size;\n        this.quadTree = new Utils_1.QuadTree(new Utils_1.Rectangle(0, 0, canvasSize.width, canvasSize.height), 4);\n        this.update(delta);\n        this.noiseZ += 0.0004;\n        for (var id in container.plugins) {\n            var plugin = container.plugins[id];\n            container.canvas.drawPlugin(plugin, delta);\n        }\n        for (var _i = 0, _a = this.array; _i < _a.length; _i++) {\n            var p = _a[_i];\n            p.draw(delta);\n        }\n    };\n    Particles.prototype.clear = function () {\n        this.array = [];\n    };\n    Particles.prototype.push = function (nb, mousePosition) {\n        var _a;\n        var container = this.container;\n        var options = container.options;\n        var limit = options.particles.number.limit * container.density;\n        this.pushing = true;\n        if (limit > 0) {\n            var countToRemove = this.count + nb - limit;\n            if (countToRemove > 0) {\n                this.removeQuantity(countToRemove);\n            }\n        }\n        var pos;\n        if (mousePosition) {\n            pos = (_a = mousePosition.position) !== null && _a !== void 0 ? _a : { x: 0, y: 0 };\n        }\n        for (var i = 0; i < nb; i++) {\n            this.addParticle(pos);\n        }\n        if (!options.particles.move.enable) {\n            this.container.play();\n        }\n        this.pushing = false;\n    };\n    Particles.prototype.addParticle = function (position, overrideOptions) {\n        var particle = new Particle_1.Particle(this.container, position, overrideOptions);\n        this.array.push(particle);\n        return particle;\n    };\n    Particles.prototype.removeQuantity = function (quantity) {\n        var container = this.container;\n        var options = container.options;\n        this.removeAt(0, quantity);\n        if (!options.particles.move.enable) {\n            this.container.play();\n        }\n    };\n    return Particles;\n}());\nexports.Particles = Particles;\n"]},"metadata":{},"sourceType":"script"}