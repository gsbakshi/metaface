{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Bubbler = void 0;\n\nvar Utils_1 = require(\"../../../../Utils\");\n\nvar Enums_1 = require(\"../../../../Enums\");\n\nvar Bubbler = function () {\n  function Bubbler() {}\n\n  Bubbler.reset = function (particle) {\n    if (!particle.bubble.inRange) {\n      delete particle.bubble.opacity;\n      delete particle.bubble.radius;\n      delete particle.bubble.color;\n    }\n  };\n\n  Bubbler.bubble = function (container, _delta) {\n    var options = container.options;\n    var events = options.interactivity.events;\n    var onHover = events.onHover;\n    var onClick = events.onClick;\n    var hoverEnabled = onHover.enable;\n    var hoverMode = onHover.mode;\n    var clickEnabled = onClick.enable;\n    var clickMode = onClick.mode;\n\n    if (hoverEnabled && Utils_1.Utils.isInArray(Enums_1.HoverMode.bubble, hoverMode)) {\n      this.hoverBubble(container);\n    } else if (clickEnabled && Utils_1.Utils.isInArray(Enums_1.ClickMode.bubble, clickMode)) {\n      this.clickBubble(container);\n    }\n  };\n\n  Bubbler.process = function (container, particle, distMouse, timeSpent, data) {\n    var bubbleParam = data.bubbleObj.optValue;\n\n    if (bubbleParam === undefined) {\n      return;\n    }\n\n    var options = container.options;\n    var bubbleDuration = options.interactivity.modes.bubble.duration;\n    var bubbleDistance = container.retina.bubbleModeDistance;\n    var particlesParam = data.particlesObj.optValue;\n    var pObjBubble = data.bubbleObj.value;\n    var pObj = data.particlesObj.value || 0;\n    var type = data.type;\n\n    if (bubbleParam !== particlesParam) {\n      if (!container.bubble.durationEnd) {\n        if (distMouse <= bubbleDistance) {\n          var obj = pObjBubble !== null && pObjBubble !== void 0 ? pObjBubble : pObj;\n\n          if (obj !== bubbleParam) {\n            var value = pObj - timeSpent * (pObj - bubbleParam) / bubbleDuration;\n\n            if (type === Enums_1.ProcessBubbleType.size) {\n              particle.bubble.radius = value;\n            }\n\n            if (type === Enums_1.ProcessBubbleType.opacity) {\n              particle.bubble.opacity = value;\n            }\n          }\n        } else {\n          if (type === Enums_1.ProcessBubbleType.size) {\n            delete particle.bubble.radius;\n          }\n\n          if (type === Enums_1.ProcessBubbleType.opacity) {\n            delete particle.bubble.opacity;\n          }\n        }\n      } else if (pObjBubble) {\n        if (type === Enums_1.ProcessBubbleType.size) {\n          delete particle.bubble.radius;\n        }\n\n        if (type === Enums_1.ProcessBubbleType.opacity) {\n          delete particle.bubble.opacity;\n        }\n      }\n    }\n  };\n\n  Bubbler.clickBubble = function (container) {\n    var _a;\n\n    var options = container.options;\n    var mouseClickPos = container.interactivity.mouse.clickPosition;\n\n    if (mouseClickPos === undefined) {\n      return;\n    }\n\n    var distance = container.retina.bubbleModeDistance;\n    var query = container.particles.quadTree.query(new Utils_1.Circle(mouseClickPos.x, mouseClickPos.y, distance));\n\n    for (var _i = 0, query_1 = query; _i < query_1.length; _i++) {\n      var particle = query_1[_i];\n      particle.bubble.inRange = true;\n      var pos = particle.getPosition();\n      var distMouse = Utils_1.Utils.getDistance(pos, mouseClickPos);\n      var timeSpent = (new Date().getTime() - (container.interactivity.mouse.clickTime || 0)) / 1000;\n\n      if (container.bubble.clicking) {\n        if (timeSpent > options.interactivity.modes.bubble.duration) {\n          container.bubble.durationEnd = true;\n        }\n\n        if (timeSpent > options.interactivity.modes.bubble.duration * 2) {\n          container.bubble.clicking = false;\n          container.bubble.durationEnd = false;\n        }\n\n        var sizeData = {\n          bubbleObj: {\n            optValue: container.retina.bubbleModeSize,\n            value: particle.bubble.radius\n          },\n          particlesObj: {\n            optValue: (_a = particle.sizeValue) !== null && _a !== void 0 ? _a : container.retina.sizeValue,\n            value: particle.size.value\n          },\n          type: Enums_1.ProcessBubbleType.size\n        };\n        this.process(container, particle, distMouse, timeSpent, sizeData);\n        var opacityData = {\n          bubbleObj: {\n            optValue: options.interactivity.modes.bubble.opacity,\n            value: particle.bubble.opacity\n          },\n          particlesObj: {\n            optValue: particle.particlesOptions.opacity.value,\n            value: particle.opacity.value\n          },\n          type: Enums_1.ProcessBubbleType.opacity\n        };\n        this.process(container, particle, distMouse, timeSpent, opacityData);\n\n        if (!container.bubble.durationEnd) {\n          if (distMouse <= container.retina.bubbleModeDistance) {\n            this.hoverBubbleColor(container, particle);\n          } else {\n            delete particle.bubble.color;\n          }\n        } else {\n          delete particle.bubble.color;\n        }\n      }\n    }\n  };\n\n  Bubbler.hoverBubble = function (container) {\n    var mousePos = container.interactivity.mouse.position;\n\n    if (mousePos === undefined) {\n      return;\n    }\n\n    var distance = container.retina.bubbleModeDistance;\n    var query = container.particles.quadTree.query(new Utils_1.Circle(mousePos.x, mousePos.y, distance));\n\n    for (var _i = 0, query_2 = query; _i < query_2.length; _i++) {\n      var particle = query_2[_i];\n      particle.bubble.inRange = true;\n      var pos = particle.getPosition();\n      var distance_1 = Utils_1.Utils.getDistance(pos, mousePos);\n      var ratio = 1 - distance_1 / container.retina.bubbleModeDistance;\n\n      if (distance_1 <= container.retina.bubbleModeDistance) {\n        if (ratio >= 0 && container.interactivity.status === Utils_1.Constants.mouseMoveEvent) {\n          this.hoverBubbleSize(container, particle, ratio);\n          this.hoverBubbleOpacity(container, particle, ratio);\n          this.hoverBubbleColor(container, particle);\n        }\n      } else {\n        this.reset(particle);\n      }\n\n      if (container.interactivity.status === Utils_1.Constants.mouseLeaveEvent) {\n        this.reset(particle);\n      }\n    }\n  };\n\n  Bubbler.hoverBubbleSize = function (container, particle, ratio) {\n    var _a;\n\n    var modeSize = container.retina.bubbleModeSize;\n\n    if (modeSize === undefined) {\n      return;\n    }\n\n    var optSize = (_a = particle.sizeValue) !== null && _a !== void 0 ? _a : container.retina.sizeValue;\n    var pSize = particle.size.value;\n    var size = this.calculateBubbleValue(pSize, modeSize, optSize, ratio);\n\n    if (size !== undefined) {\n      particle.bubble.radius = size;\n    }\n  };\n\n  Bubbler.hoverBubbleOpacity = function (container, particle, ratio) {\n    var options = container.options;\n    var modeOpacity = options.interactivity.modes.bubble.opacity;\n\n    if (modeOpacity === undefined) {\n      return;\n    }\n\n    var optOpacity = particle.particlesOptions.opacity.value;\n    var pOpacity = particle.opacity.value;\n    var opacity = this.calculateBubbleValue(pOpacity, modeOpacity, optOpacity, ratio);\n\n    if (opacity !== undefined) {\n      particle.bubble.opacity = opacity;\n    }\n  };\n\n  Bubbler.calculateBubbleValue = function (particleValue, modeValue, optionsValue, ratio) {\n    if (modeValue > optionsValue) {\n      var size = particleValue + (modeValue - optionsValue) * ratio;\n      return Utils_1.Utils.clamp(size, particleValue, modeValue);\n    } else if (modeValue < optionsValue) {\n      var size = particleValue - (optionsValue - modeValue) * ratio;\n      return Utils_1.Utils.clamp(size, modeValue, particleValue);\n    }\n  };\n\n  Bubbler.hoverBubbleColor = function (container, particle) {\n    var options = container.options;\n\n    if (particle.bubble.color === undefined) {\n      var modeColor = options.interactivity.modes.bubble.color;\n\n      if (modeColor === undefined) {\n        return;\n      }\n\n      var bubbleColor = modeColor instanceof Array ? Utils_1.Utils.itemFromArray(modeColor) : modeColor;\n      particle.bubble.color = Utils_1.ColorUtils.colorToHsl(bubbleColor);\n    }\n  };\n\n  return Bubbler;\n}();\n\nexports.Bubbler = Bubbler;","map":{"version":3,"sources":["/Volumes/AltDisk/Work/Learning/Udemy/Web Dev Course - Udemy/React/smartbrain/node_modules/tsparticles/dist/Core/Particle/Interactions/Mouse/Bubbler.js"],"names":["Object","defineProperty","exports","value","Bubbler","Utils_1","require","Enums_1","reset","particle","bubble","inRange","opacity","radius","color","container","_delta","options","events","interactivity","onHover","onClick","hoverEnabled","enable","hoverMode","mode","clickEnabled","clickMode","Utils","isInArray","HoverMode","hoverBubble","ClickMode","clickBubble","process","distMouse","timeSpent","data","bubbleParam","bubbleObj","optValue","undefined","bubbleDuration","modes","duration","bubbleDistance","retina","bubbleModeDistance","particlesParam","particlesObj","pObjBubble","pObj","type","durationEnd","obj","ProcessBubbleType","size","_a","mouseClickPos","mouse","clickPosition","distance","query","particles","quadTree","Circle","x","y","_i","query_1","length","pos","getPosition","getDistance","Date","getTime","clickTime","clicking","sizeData","bubbleModeSize","sizeValue","opacityData","particlesOptions","hoverBubbleColor","mousePos","position","query_2","distance_1","ratio","status","Constants","mouseMoveEvent","hoverBubbleSize","hoverBubbleOpacity","mouseLeaveEvent","modeSize","optSize","pSize","calculateBubbleValue","modeOpacity","optOpacity","pOpacity","particleValue","modeValue","optionsValue","clamp","modeColor","bubbleColor","Array","itemFromArray","ColorUtils","colorToHsl"],"mappings":"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","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Bubbler = void 0;\nvar Utils_1 = require(\"../../../../Utils\");\nvar Enums_1 = require(\"../../../../Enums\");\nvar Bubbler = (function () {\n    function Bubbler() {\n    }\n    Bubbler.reset = function (particle) {\n        if (!particle.bubble.inRange) {\n            delete particle.bubble.opacity;\n            delete particle.bubble.radius;\n            delete particle.bubble.color;\n        }\n    };\n    Bubbler.bubble = function (container, _delta) {\n        var options = container.options;\n        var events = options.interactivity.events;\n        var onHover = events.onHover;\n        var onClick = events.onClick;\n        var hoverEnabled = onHover.enable;\n        var hoverMode = onHover.mode;\n        var clickEnabled = onClick.enable;\n        var clickMode = onClick.mode;\n        if (hoverEnabled && Utils_1.Utils.isInArray(Enums_1.HoverMode.bubble, hoverMode)) {\n            this.hoverBubble(container);\n        }\n        else if (clickEnabled && Utils_1.Utils.isInArray(Enums_1.ClickMode.bubble, clickMode)) {\n            this.clickBubble(container);\n        }\n    };\n    Bubbler.process = function (container, particle, distMouse, timeSpent, data) {\n        var bubbleParam = data.bubbleObj.optValue;\n        if (bubbleParam === undefined) {\n            return;\n        }\n        var options = container.options;\n        var bubbleDuration = options.interactivity.modes.bubble.duration;\n        var bubbleDistance = container.retina.bubbleModeDistance;\n        var particlesParam = data.particlesObj.optValue;\n        var pObjBubble = data.bubbleObj.value;\n        var pObj = data.particlesObj.value || 0;\n        var type = data.type;\n        if (bubbleParam !== particlesParam) {\n            if (!container.bubble.durationEnd) {\n                if (distMouse <= bubbleDistance) {\n                    var obj = pObjBubble !== null && pObjBubble !== void 0 ? pObjBubble : pObj;\n                    if (obj !== bubbleParam) {\n                        var value = pObj - (timeSpent * (pObj - bubbleParam)) / bubbleDuration;\n                        if (type === Enums_1.ProcessBubbleType.size) {\n                            particle.bubble.radius = value;\n                        }\n                        if (type === Enums_1.ProcessBubbleType.opacity) {\n                            particle.bubble.opacity = value;\n                        }\n                    }\n                }\n                else {\n                    if (type === Enums_1.ProcessBubbleType.size) {\n                        delete particle.bubble.radius;\n                    }\n                    if (type === Enums_1.ProcessBubbleType.opacity) {\n                        delete particle.bubble.opacity;\n                    }\n                }\n            }\n            else if (pObjBubble) {\n                if (type === Enums_1.ProcessBubbleType.size) {\n                    delete particle.bubble.radius;\n                }\n                if (type === Enums_1.ProcessBubbleType.opacity) {\n                    delete particle.bubble.opacity;\n                }\n            }\n        }\n    };\n    Bubbler.clickBubble = function (container) {\n        var _a;\n        var options = container.options;\n        var mouseClickPos = container.interactivity.mouse.clickPosition;\n        if (mouseClickPos === undefined) {\n            return;\n        }\n        var distance = container.retina.bubbleModeDistance;\n        var query = container.particles.quadTree.query(new Utils_1.Circle(mouseClickPos.x, mouseClickPos.y, distance));\n        for (var _i = 0, query_1 = query; _i < query_1.length; _i++) {\n            var particle = query_1[_i];\n            particle.bubble.inRange = true;\n            var pos = particle.getPosition();\n            var distMouse = Utils_1.Utils.getDistance(pos, mouseClickPos);\n            var timeSpent = (new Date().getTime() - (container.interactivity.mouse.clickTime || 0)) / 1000;\n            if (container.bubble.clicking) {\n                if (timeSpent > options.interactivity.modes.bubble.duration) {\n                    container.bubble.durationEnd = true;\n                }\n                if (timeSpent > options.interactivity.modes.bubble.duration * 2) {\n                    container.bubble.clicking = false;\n                    container.bubble.durationEnd = false;\n                }\n                var sizeData = {\n                    bubbleObj: {\n                        optValue: container.retina.bubbleModeSize,\n                        value: particle.bubble.radius,\n                    },\n                    particlesObj: {\n                        optValue: (_a = particle.sizeValue) !== null && _a !== void 0 ? _a : container.retina.sizeValue,\n                        value: particle.size.value,\n                    },\n                    type: Enums_1.ProcessBubbleType.size,\n                };\n                this.process(container, particle, distMouse, timeSpent, sizeData);\n                var opacityData = {\n                    bubbleObj: {\n                        optValue: options.interactivity.modes.bubble.opacity,\n                        value: particle.bubble.opacity,\n                    },\n                    particlesObj: {\n                        optValue: particle.particlesOptions.opacity.value,\n                        value: particle.opacity.value,\n                    },\n                    type: Enums_1.ProcessBubbleType.opacity,\n                };\n                this.process(container, particle, distMouse, timeSpent, opacityData);\n                if (!container.bubble.durationEnd) {\n                    if (distMouse <= container.retina.bubbleModeDistance) {\n                        this.hoverBubbleColor(container, particle);\n                    }\n                    else {\n                        delete particle.bubble.color;\n                    }\n                }\n                else {\n                    delete particle.bubble.color;\n                }\n            }\n        }\n    };\n    Bubbler.hoverBubble = function (container) {\n        var mousePos = container.interactivity.mouse.position;\n        if (mousePos === undefined) {\n            return;\n        }\n        var distance = container.retina.bubbleModeDistance;\n        var query = container.particles.quadTree.query(new Utils_1.Circle(mousePos.x, mousePos.y, distance));\n        for (var _i = 0, query_2 = query; _i < query_2.length; _i++) {\n            var particle = query_2[_i];\n            particle.bubble.inRange = true;\n            var pos = particle.getPosition();\n            var distance_1 = Utils_1.Utils.getDistance(pos, mousePos);\n            var ratio = 1 - distance_1 / container.retina.bubbleModeDistance;\n            if (distance_1 <= container.retina.bubbleModeDistance) {\n                if (ratio >= 0 && container.interactivity.status === Utils_1.Constants.mouseMoveEvent) {\n                    this.hoverBubbleSize(container, particle, ratio);\n                    this.hoverBubbleOpacity(container, particle, ratio);\n                    this.hoverBubbleColor(container, particle);\n                }\n            }\n            else {\n                this.reset(particle);\n            }\n            if (container.interactivity.status === Utils_1.Constants.mouseLeaveEvent) {\n                this.reset(particle);\n            }\n        }\n    };\n    Bubbler.hoverBubbleSize = function (container, particle, ratio) {\n        var _a;\n        var modeSize = container.retina.bubbleModeSize;\n        if (modeSize === undefined) {\n            return;\n        }\n        var optSize = (_a = particle.sizeValue) !== null && _a !== void 0 ? _a : container.retina.sizeValue;\n        var pSize = particle.size.value;\n        var size = this.calculateBubbleValue(pSize, modeSize, optSize, ratio);\n        if (size !== undefined) {\n            particle.bubble.radius = size;\n        }\n    };\n    Bubbler.hoverBubbleOpacity = function (container, particle, ratio) {\n        var options = container.options;\n        var modeOpacity = options.interactivity.modes.bubble.opacity;\n        if (modeOpacity === undefined) {\n            return;\n        }\n        var optOpacity = particle.particlesOptions.opacity.value;\n        var pOpacity = particle.opacity.value;\n        var opacity = this.calculateBubbleValue(pOpacity, modeOpacity, optOpacity, ratio);\n        if (opacity !== undefined) {\n            particle.bubble.opacity = opacity;\n        }\n    };\n    Bubbler.calculateBubbleValue = function (particleValue, modeValue, optionsValue, ratio) {\n        if (modeValue > optionsValue) {\n            var size = particleValue + (modeValue - optionsValue) * ratio;\n            return Utils_1.Utils.clamp(size, particleValue, modeValue);\n        }\n        else if (modeValue < optionsValue) {\n            var size = particleValue - (optionsValue - modeValue) * ratio;\n            return Utils_1.Utils.clamp(size, modeValue, particleValue);\n        }\n    };\n    Bubbler.hoverBubbleColor = function (container, particle) {\n        var options = container.options;\n        if (particle.bubble.color === undefined) {\n            var modeColor = options.interactivity.modes.bubble.color;\n            if (modeColor === undefined) {\n                return;\n            }\n            var bubbleColor = modeColor instanceof Array ? Utils_1.Utils.itemFromArray(modeColor) : modeColor;\n            particle.bubble.color = Utils_1.ColorUtils.colorToHsl(bubbleColor);\n        }\n    };\n    return Bubbler;\n}());\nexports.Bubbler = Bubbler;\n"]},"metadata":{},"sourceType":"script"}